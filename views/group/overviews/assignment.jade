extends ../../structure/default.jade

include ../../includes/basic.jade

block append scripts
    script(src="/scripts/includes/cardicons.js")
    script(src="/scripts/includes/selectTrigger.js")
    script(src="/scripts/includes/timeline.js")

block append styles
    link(href="/styles/flip.css" rel="stylesheet")

block headerTitle
    h1
        a(href="/group/" + assignment.group._id)= assignment.group.name
    h2#subheader Assignment

block content
    .container
        if !user.admin
            p You do not have sufficient rights to view this page!
        else
            h2= assignment.name
            if assignment.files.length == 0
                p There are no hand-ins for this assignment yet!
            else
                .row
                    for file in assignment.files
                        +flipper()(class="group")
                            +front-card() 
                                if assignment.typ == "open" || assignment.due > file.timestamp
                                    .assignmentStateBulb.back-done
                                else
                                    .assignmentStateBulb.back-late
                                if file.feedback.length == 0
                                    .assignmentStateFeedback.back-normal
                                else 
                                    .assignmentStateFeedback.back-done
                                .yAlign
                                    h3.special= file.name
                                    h4#subheadersmall
                                        span #{file.students[0].name} #{file.students[0].surename} 
                                        - var done = file.students[0]._id
                                        for student in file.students
                                            if student._id != done
                                                span / #{student.name} #{student.surename} 
                                    +timeline(assignment.group.start, assignment.group.end, file.timestamp)(class="hidden")
                            +back-card()
                                +card-icons() 
                                    .bottom-icons
                                        +card-icon-a("/file/" + file._id, 'Feedback', 'pencil')

            hr
            .row
                +cardLink-a("../../" + assignment.group.id, "Back to Course")